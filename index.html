
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ULTRA-RES AI | The Future of Image Upscaling</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@upscalerjs/default-model@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/upscaler@latest"></script>
    <style>
        :root { --accent: #00ff88; --bg: #0a0a0c; --card: #16161a; --text: #ececec; }
        * { box-sizing: border-box; transition: all 0.3s ease; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; scroll-behavior: smooth; }
        
        /* Navigation */
        nav { display: flex; justify-content: space-between; align-items: center; padding: 25px 8%; background: rgba(10, 10, 12, 0.8); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid #222; }
        .logo { font-size: 1.8rem; font-weight: 800; letter-spacing: -1px; color: #fff; }
        .logo span { color: var(--accent); }

        /* Hero Section */
        .hero { text-align: center; padding: 120px 10% 60px; background: radial-gradient(circle at top, #1a2c23 0%, #0a0a0c 60%); }
        .hero h1 { font-size: 4.5rem; margin: 0; line-height: 1.1; font-weight: 900; background: linear-gradient(to right, #fff, #888); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero p { font-size: 1.2rem; color: #888; max-width: 600px; margin: 20px auto; }

        /* The Tool Card */
        .glass-card { background: var(--card); border: 1px solid #333; border-radius: 24px; max-width: 900px; margin: 0 auto; padding: 40px; box-shadow: 0 40px 100px rgba(0,0,0,0.5); }
        .drop-zone { border: 2px dashed #444; border-radius: 16px; padding: 60px; cursor: pointer; background: #1c1c21; }
        .drop-zone:hover { border-color: var(--accent); background: #222; }
        
        /* Controls */
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px; text-align: left; }
        select, .btn-main { width: 100%; padding: 18px; border-radius: 12px; font-size: 1rem; border: none; font-weight: 600; }
        select { background: #222; color: #fff; border: 1px solid #444; cursor: pointer; }
        .btn-main { background: var(--accent); color: #000; cursor: pointer; text-transform: uppercase; letter-spacing: 1px; }
        .btn-main:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0, 255, 136, 0.3); }

        /* Pricing */
        .pricing-section { padding: 100px 8%; text-align: center; }
        .price-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-top: 50px; }
        .price-card { background: var(--card); padding: 40px; border-radius: 24px; border: 1px solid #222; text-align: left; }
        .price-card.featured { border: 2px solid var(--accent); background: #1a1a1f; transform: scale(1.05); }
        .price-card h2 { font-size: 2.5rem; margin: 10px 0; }
        .feature-list { list-style: none; padding: 0; margin: 30px 0; }
        .feature-list li { margin-bottom: 12px; color: #aaa; }
        .feature-list li::before { content: "âœ“ "; color: var(--accent); margin-right: 10px; }

        #result-display { margin-top: 40px; display: none; }
        img { border-radius: 12px; border: 1px solid #444; }
        .loader { color: var(--accent); font-family: monospace; }
    </style>
</head>
<body>

<nav>
    <div class="logo">ULTRA<span>RES</span></div>
    <div style="display: flex; gap: 30px; align-items: center;">
        <a href="#pricing" style="color: #888; text-decoration: none;">Pricing</a>
        <button class="btn-main" style="padding: 10px 25px; font-size: 0.8rem;">Login</button>
    </div>
</nav>

<section class="hero">
    <h1>Don't just upscale.<br><span>Reinvent</span> Reality.</h1>
    <p>Professional grade AI upscaling to 8K. No servers, no data tracking, 100% private in your browser.</p>
</section>

<div class="glass-card">
    <div class="drop-zone" id="drop-zone" onclick="document.getElementById('file-input').click()">
        <h3 id="file-label">Drag & Drop Image</h3>
        <p>Supports JPG, PNG, WEBP (Max 10MB)</p>
        <input type="file" id="file-input" hidden>
    </div>

    <div class="controls">
        <div>
            <label style="display:block; margin-bottom:10px; color:#888;">Select Output Quality</label>
            <select id="res-select">
                <option value="2">2K Resolution (Standard)</option>
                <option value="4">4K Resolution (Ultra HD)</option>
                <option value="6">6K Resolution (Studio Pro)</option>
                <option value="8">8K Resolution (Cinema Grade)</option>
            </select>
        </div>
        <div style="display: flex; align-items: flex-end;">
            <button class="btn-main" id="process-btn">Start AI Processing</button>
        </div>
    </div>
    
    <div id="result-display">
        <h3 style="color: var(--accent);">Processing complete!</h3>
        <div id="image-container"></div>
        <br>
        <button class="btn-main" style="background:#222; color:#fff;" onclick="location.reload()">Upscale Another</button>
    </div>
    <p id="status" class="loader"></p>
</div>

<section id="pricing" class="pricing-section">
    <h6>TRANSPARENT PRICING</h6>
    <h1>Choose your power level</h1>
    
    <div class="price-grid">
        <div class="price-card">
            <h3>Starter</h3>
            <p>For casual hobbyists</p>
            <h2>Free</h2>
            <ul class="feature-list">
                <li>Upscale to 2K</li>
                <li>Limited to 4K</li>
                <li>Standard Processing</li>
                <li>Browser-based Security</li>
            </ul>
            <button class="btn-main" style="background: transparent; border: 1px solid #444; color: #fff;">Get Started</button>
        </div>

        <div class="price-card featured">
            <h3 style="color:var(--accent)">Professional</h3>
            <p>For designers & studios</p>
            <h2>$19<span>/mo</span></h2>
            <ul class="feature-list">
                <li>Upscale to 8K Cinema</li>
                <li>Batch Upload (50 images)</li>
                <li>Commercial Usage License</li>
                <li>Priority GPU Support</li>
                <li>No Watermarks</li>
            </ul>
            <button class="btn-main">Upgrade to Pro</button>
        </div>
    </div>
</section>

<footer style="padding: 100px 0; text-align: center; border-top: 1px solid #222;">
    <p style="color:#555">Powered by TensorFlow.js | Hosted on Vercel | Designed for the 8K Era</p>
</footer>

<script>
const upscaler = new Upscaler();
    const btn = document.getElementById('process-btn');
    const fileInput = document.getElementById('file-input');
    const status = document.getElementById('status');
    const resSelect = document.getElementById('res-select');

    const SECRET_PRO_KEY = "PRO8K_2026";

    // 1. Check user count from browser memory
    let upscaleCount = localStorage.getItem('upscale_count') || 0;

    const fileInput = document.getElementById('file-input');
    const dropZone = document.getElementById('drop-zone');
    const fileLabel = document.getElementById('file-label');

    // This handles the "Gallery/File Picker" selection
    fileInput.onchange = (e) => {
        if (e.target.files.length > 0) {
            handleFile(e.target.files[0]);
        }
    };

    // This handles the "Drag and Drop" action
    dropZone.ondragover = (e) => {
        e.preventDefault();
        dropZone.style.borderColor = "#00ff88";
    };

    dropZone.ondrop = (e) => {
        e.preventDefault();
        if (e.dataTransfer.files.length > 0) {
            handleFile(e.dataTransfer.files[0]);
        }
    };

    // The main function to put the image in the area
    function handleFile(file) {
        // 1. Show the name of the file
        fileLabel.innerText = "Selected: " + file.name;
        fileLabel.style.color = "#00ff88";

        // 2. Preview the image inside the drop zone (Optional but looks "Big")
        const reader = new FileReader();
        reader.onload = (e) => {
            dropZone.style.backgroundImage = `url(${e.target.result})`;
            dropZone.style.backgroundSize = "contain";
            dropZone.style.backgroundRepeat = "no-repeat";
            dropZone.style.backgroundPosition = "center";
            // Hide the text so the image looks clean
            fileLabel.style.opacity = "0.2"; 
        };
        reader.readAsDataURL(file);

        // 3. Very important: Attach the file to the input so the "Start" button can find it
        const dataTransfer = new DataTransfer();
        dataTransfer.items.add(file);
        fileInput.files = dataTransfer.files;
    }

    btn.onclick = async () => {
        const file = fileInput.files[0];
        const val = resSelect.value;
        const isPro = localStorage.getItem('isProUser') === 'true';

        if(!file) return alert("Please upload an image!");

        // 2. Check for 8K Pro Lock
        if(val == "8" && !isPro) {
            const key = prompt("8K is Pro. Enter Key or pay to unlock:");
            if(key === SECRET_PRO_KEY) {
                localStorage.setItem('isProUser', 'true');
                alert("Pro Unlocked!");
            } else {
                return alert("Invalid Key!");
            }
        }

        btn.disabled = true;
        status.innerText = "AI Processing...";

        const img = new Image();
        img.src = URL.createObjectURL(file);

        img.onload = async () => {
            try {
                const upscaledSrc = await upscaler.upscale(img);
                
                // 3. Increment count
                upscaleCount++;
                localStorage.setItem('upscale_count', upscaleCount);

                // 4. Create a Canvas to add Watermark
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const resultImg = new Image();
                resultImg.src = upscaledSrc;

                resultImg.onload = () => {
                    canvas.width = resultImg.width;
                    canvas.height = resultImg.height;
                    ctx.drawImage(resultImg, 0, 0);

                    // 5. Apply Watermark if count > 3 and NOT Pro
                    if(upscaleCount > 3 && !isPro) {
                        ctx.font = `${canvas.width / 15}px Arial`;
                        ctx.fillStyle = "rgba(255, 255, 255, 0.4)";
                        ctx.textAlign = "center";
                        // Draw watermark multiple times
                        ctx.fillText("AI ULTRA-RES WATERMARK", canvas.width/2, canvas.height/2);
                        ctx.fillText("PAY TO REMOVE", canvas.width/2, canvas.height/2 + 100);
                        
                        document.getElementById('image-container').innerHTML = 
                            "<p style='color:orange'>Free limit reached! Image has watermark. <a href='#pricing' style='color:cyan'>Go Pro to remove.</a></p>";
                    } else {
                        document.getElementById('image-container').innerHTML = "<h3>Success! No Watermark.</h3>";
                    }

                    // 6. Final Output
                    const finalDataUrl = canvas.toDataURL("image/png");
                    const finalDisplayImg = new Image();
                    finalDisplayImg.src = finalDataUrl;
                    finalDisplayImg.style.width = "100%";

                    const dlBtn = document.createElement('a');
                    dlBtn.href = finalDataUrl;
                    dlBtn.download = "upscaled.png";
                    dlBtn.innerHTML = "<button class='btn-main'>Download Image</button>";

                    document.getElementById('image-container').appendChild(finalDisplayImg);
                    document.getElementById('image-container').appendChild(dlBtn);
                    document.getElementById('result-display').style.display = "block";
                    status.innerText = "";
                    btn.disabled = false;
                };
            } catch (e) {
                status.innerText = "Error: Too large!";
                btn.disabled = false;
            }
        };
    };
</script>

</body>
</html>
